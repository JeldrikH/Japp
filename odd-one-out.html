<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Odd One Out Game</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      margin-top: 20px;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(3, 100px);
      gap: 15px;
      justify-content: center;
      margin-top: 20px;
    }
    .pattern {
      width: 100px;
      height: 100px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      border: 2px solid black;
      cursor: pointer;
      transition: transform 0.2s;
    }
    .pattern:hover {
      transform: scale(1.1);
    }
  </style>
</head>
<body>
  <h1>Odd One Out</h1>
  <p id="level">Level: 1</p>
  <div class="grid" id="grid"></div>
  <p id="message"></p>

  <script>
    let level = 1;

    function generatePatterns(level) {
        const grid = document.getElementById('grid');
        grid.innerHTML = ''; // Clear previous patterns
        var elements = [];
        var totalPatterns = 9;
        var baseColor = getRandomColor();
        var oddColor = getRandomColor();
        var baseShape = getRandomShape();
        var oddShape = getRandomShape();

        // Ensure oddColor and oddShape are different from baseColor and baseShape
        while (oddColor === baseColor) {
            oddColor = getRandomColor();
        }
        while (oddShape === baseShape) {
            oddShape = getRandomShape();
        }

        // Randomly choose the odd one out position
        const oddIndex = Math.floor(Math.random() * totalPatterns);

        for (let i = 0; i < totalPatterns; i++) {
            const pattern = document.createElement('div');
            pattern.classList.add('pattern');

            // Set the odd one out
            if (i === oddIndex) {
            pattern.style.backgroundColor = oddColor;
            pattern.textContent = oddShape;
            pattern.onclick = () => nextLevel(true);
            } else {
            pattern.style.backgroundColor = baseColor;
            pattern.textContent = baseShape;
            pattern.onclick = () => nextLevel(false);
            }

            grid.appendChild(pattern);
        }
    }

    function nextLevel(correct) {
      const message = document.getElementById('message');
      if (correct) {
        message.textContent = 'Correct! Moving to the next level...';
        let pattern = getRandomPattern();

        message.textContent = pattern
        level++;
        document.getElementById('level').textContent = `Level: ${level}`;
        generatePatterns(level);
      } else {
        message.textContent = 'Wrong! Try again.';
      }
    }

    function getRandomColor() {
      const colors = ['red', 'blue', 'green', 'yellow', 'purple', 'orange', 'pink', 'brown', 'cyan'];
      return colors[Math.floor(Math.random() * colors.length)];
    }

    function getRandomShape() {
      const shapes = ['▲', '●', '■', '◆', '★', '⬤', '✦', '✪', '✿'];
      return shapes[Math.floor(Math.random() * shapes.length)];
    }

    function getRandomPattern() {
        // Generate a random pattern and cast to 9 bits
        pattern = Math.floor(Math.random() * 512) + 1
        return (pattern & 0b111111111).toString(2).padStart(9, '0');
    }
    function countSimilarities(){

    }
    // Start the game
    generatePatterns(level);
  </script>
</body>
</html>